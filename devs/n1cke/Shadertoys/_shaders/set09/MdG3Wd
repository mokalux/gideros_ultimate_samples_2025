{"Shader":{"ver":"0.1","info":{"id":"MdG3Wd","date":"1457034782","viewed":365,"name":"Music visualisation test","username":"piotrekli","description":"a very simple music visualisation","likes":3,"published":3,"flags":36,"tags":["2d","music"],"hasliked":0},"renderpass":[{"inputs":[{"id":258,"src":"\/presets\/previz\/buffer01.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"id":37,"channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy \/ iResolution.xy;\n    vec3 color = texture2D(iChannel0, uv).xyz;\n\tfragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":32,"src":"\/presets\/mic.png","ctype":"mic","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"id":257,"src":"\/presets\/previz\/buffer00.png","ctype":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"id":257,"channel":0}],"code":"#define PI 3.141592653\n\nvec4 vecmix(vec4 v1, vec4 v2, vec4 m)\n{\n    return vec4(mix(v1.x, v2.x, m.x),\n                mix(v1.y, v2.y, m.y),\n                mix(v1.z, v2.z, m.z),\n                mix(v1.w, v2.w, m.w));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy \/ iResolution.xy;\n    vec4 color1 = abs(0.5-uv.y)<0.01 ? texture2D(iChannel0, vec2(uv.x, 0.25)) : vec4(0.0);\n    uv -= 0.5;\n    float beta = 0.005;\n    vec2 rot = vec2(cos(beta), sin(beta));\n    uv = vec2(uv.x*rot.x-uv.y*rot.y, uv.x*rot.y+uv.y*rot.x);\n    uv *= 0.9999;\n    uv += 0.5;\n    uv = fract(uv);\n    vec4 color2 = texture2D(iChannel1, uv);\n    fragColor = 1.0-abs(color2-color1);\/\/mix(color1, color2, d); \/\/color1+color2-color1*color2*(1.0-d)-d;\n    for (int i=0; i<4; ++i)\n    \tfragColor *= vecmix(vec4(1.0), fragColor, vec4(0.3, 0.5, 0.8, 0.0)*0.0008);\n    fragColor = 1.0-fragColor;\n}","name":"Buf A","description":"","type":"buffer"},{"inputs":[{"id":257,"src":"\/presets\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"id":258,"src":"\/presets\/previz\/buffer01.png","ctype":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"id":258,"channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy \/ iResolution.xy;\n    vec4 color1 = texture2D(iChannel0, uv);\n    vec4 color2 = texture2D(iChannel1, fract(uv+(color1.xy-0.25)*5.0\/iResolution.xy));\n    color1 *= 1.4;\n    vec4 color3 = mix(color2, color1, 0.02);\n    fragColor = mix(color3, color1, 0.01);\n}","name":"Buf B","description":"","type":"buffer"}]}}