{"Shader":{"ver":"0.1","info":{"id":"MlcGDl","date":"1472317078","viewed":108,"name":"voronoi paint","username":"abje","description":"click to set point. uses hash function from iq, https:\/\/www.shadertoy.com\/view\/4sfGzS","likes":0,"published":3,"flags":32,"tags":["2d","voronoi"],"hasliked":0},"renderpass":[{"inputs":[{"id":257,"src":"\/presets\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"id":37,"channel":0}],"code":"float hash( float n ) { return fract(sin(n)*753.5453123); }\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float screensize = length(iResolution.xy);\n    \n    vec2 uv = fragCoord.xy \/ iResolution.xy;\n\tivec2 coord = ivec2(fragCoord);\n    vec4 pix = texture2D(iChannel0, vec2(0.0));\n\tfragColor = texture2D(iChannel0, uv);\n    \n    if (iMouse.z > 0.0) {\n        float len = texture2D(iChannel0, uv).a;\n        \n        fragColor.a = min(len, length(iMouse.xy-fragCoord.xy)\/screensize);\n        \n        \n        if (fragColor.a < len) {\n            fragColor.rgb = vec3(hash(pix.a),hash(pix.a+10.0),hash(pix.a*5.0));\n        }\n        if (fragColor.a < 1.0\/screensize*10.0) {\n            fragColor.rgb = vec3(1.0,0.0,0.0);\n        }\n    }\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":257,"src":"\/presets\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"id":257,"channel":0}],"code":"#define paint\n\nfloat hash( float n ) { return fract(sin(n)*753.5453123); }\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    \n    vec4 pix = texture2D(iChannel0, vec2(0.0));\n\t\n    float screensize = length(iResolution.xy);\n    \n    ivec2 coord = ivec2(fragCoord);\n    \n    if (coord.x == 0 && coord.y == 0) {\n        fragColor.a = pix.a;\n        if (iMouse.z < 0.0) {\n        \tfragColor.a = (mod(pix.a+iGlobalTime,1.0));\n        }\n        \n        if (iMouse.z > 0.5) {\n            fragColor.r = 1.0;\n        } else {\n            fragColor.r = 0.0;\n        }\n        \n        return;\n    }\n    \n    if (iFrame == 0) {\n        fragColor = vec4(1.0);\n        return;\n    }\n    \n    vec2 uv = fragCoord.xy\/iResolution.xy;\n    fragColor = texture2D(iChannel0, uv);\n    \n    #ifdef paint\n    bool write = iMouse.z > 0.0;\n    #else\n    bool write = iMouse.z < 0.0 && pix.r > 0.5;\n    #endif\n    \n    if (write) {\n        float len = fragColor.a;\n        \n        fragColor.a = min(len, length(iMouse.xy-fragCoord.xy)\/screensize);\n        \n        \n        if (fragColor.a < len) {\n            fragColor.rgb = vec3(hash(pix.a),hash(pix.a+10.0),hash(pix.a*5.0));\n        }\n        if (fragColor.a < 1.0\/screensize*10.0) {\n            fragColor.rgb = vec3(1.0,0.0,0.0);\n        }\n    }\n}\n","name":"Buf A","description":"","type":"buffer"}]}}