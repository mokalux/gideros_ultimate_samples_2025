{"Shader":{"ver":"0.1","info":{"id":"Xl33zn","date":"1468111576","viewed":144,"name":"[SH16A] glk7","username":"glk7","description":"[SH16A] Challenge. \n\n[url]https:\/\/www.shadertoy.com\/view\/MdKXD3[\/url]","likes":0,"published":3,"flags":0,"tags":["challenge","sizecoding","shadertoycompetition","sh16a"],"hasliked":0},"renderpass":[{"inputs":[{"id":30,"src":"\/presets\/tex16.png","ctype":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"id":37,"channel":0}],"code":"#define V vec3\n#define U normalize\n#define L for (int i = 0; i < 64; ++i) s = ceil(o-.5), s.y = .4-.3*fract(C.a = s.x*2.5+s.z*.5+6.), o+=d*min(o.y, length(n = o - clamp(s, -2., 2.)) - s.y);\n\nvoid mainImage( out vec4 C, vec2 P)\n{\n    V s,o=V(.851,2,-2.8768),q=V(0,1,0),d=U(-q*.2 - o),n=U(cross(d,q)),k=iResolution;\n    d = mat3(n, U(cross(n,d)), d) * U(V(P-k.xy*.5, k.y));\n    L\n    k = ceil(o);\n    k = (V(.4) + mod(k.x+k.z,2.) * (texture2D(iChannel0, .1*o.xz).r*.5 - .4)) *\n            \t     smoothstep(0., .5, length((o - sign(s)).xz));\n    if (o.y > .01) k = V(3,-8,6)*.01*floor(C.a)+q, q = U(n);\n    \n    C.r = pow(max(0., dot(reflect(d,q),d = U(V(-.6,.7,-.5)))), 16.);\n    o += d*.01; \n    L\n    C.g = dot(q, d)*V(1. < o.y).x;\n    C.grb = sqrt((k * ((1.+q.y)*V(7,5,10)\/40. + V(1.02,1.2,.66)*C.g)) + C.r*C.g );\n}","name":"Image","description":"","type":"image"}]}}